<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>EAMIS-HELPER | Profile</title>
	<!-- Tell the browser to be responsive to screen width -->
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
	<!-- Bootstrap 3.3.7 -->
	<link rel="stylesheet" href="../../style/bower_components/bootstrap/dist/css/bootstrap.min.css">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="../../style/bower_components/font-awesome/css/font-awesome.min.css">
	<!-- Ionicons -->
	<link rel="stylesheet" href="../../style/bower_components/Ionicons/css/ionicons.min.css">
	<!-- Theme style -->
	<link rel="stylesheet" href="../../style/dist/css/AdminLTE.min.css">
	<!-- AdminLTE Skins. Choose a skin from the css/skins
   folder instead of downloading all of them to reduce the load. -->
	<link rel="stylesheet" href="../../style/dist/css/skins/_all-skins.min.css">
	<!--echarts 引入-->
	<script src='https://cdn.bootcss.com/echarts/3.7.2/echarts.simple.js'></script>
	<script type="text/javascript" src="../../style/newstyle/js/echarts-wordcloud.js"></script>
	<!-- Morris charts -->
	<link rel="stylesheet" href="../../style/bower_components/morris.js/morris.css">
	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

	<!-- Google Font -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
	<style>
		#main {
			width: 100% !important;
			height: 100% !important;
			margin-bottom: 50px;
			float: right;
		}
	</style>
</head>

<body class="hold-transition skin-blue-light fixed">
<div class="wrapper" id="teacherInfo">

				<!-- Main Header -->
				<header class="main-header">

					<!-- Logo -->
					<a href="#" class="logo navbar-fixed-top">
						<!-- mini logo for sidebar mini 50x50 pixels -->
						<span class="logo-mini"><b>H</b>elper</span>
						<!-- logo for regular state and mobile devices -->
						<span class="logo-lg"><b>EAMIS-</b>Helper</span>
					</a>

					<!-- Header Navbar -->
					<nav class="navbar navbar-fixed-top" role="navigation">
						<!-- Sidebar toggle button-->
						<a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
							<span class="sr-only">Toggle navigation</span>
						</a>
						<!-- Navbar Right Menu -->
						<div class="navbar-custom-menu">
							<ul class="nav navbar-nav">

								<!-- Notifications Menu -->

								<!-- Tasks Menu -->
								<li class="dropdown tasks-menu">
									<!-- Menu Toggle Button -->
									<a href="#" class="dropdown-toggle" data-toggle="dropdown">
										<i class="fa fa-flag-o"></i>
										<span class="label label-danger">21</span>
									</a>
									<ul class="dropdown-menu">
										<li class="header">有21门课未评价</li>
										<li>
											<!-- Inner menu: contains the tasks -->
											<ul class="menu">
												<li>
													<!-- Task item -->
													<a href="http://localhost:8080/view/user/course-attended.html?id={{studentId}}">
														<!-- Task title and progress text -->
														<h3>
                                                     已评课数
                        <small class="pull-right">9/30</small>
                      </h3>
														<!-- The progress bar -->
														<div class="progress xs">
															<!-- Change the css width attribute to simulate progress -->
															<div class="progress-bar progress-bar-aqua" style="width: 20%" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">
																<!--<span class="sr-only">20% Complete</span>-->
															</div>
														</div>
													</a>
												</li>
												<!-- end task item -->
											</ul>
										</li>
										<li class="footer">
											<a href="http://localhost:8080/view/user/classdetail-uploads.html?id={{studentId}}">进入评课</a>
										</li>
									</ul>
								</li>
								<!-- User Account Menu -->
								<li class="dropdown user user-menu">
									<!-- Menu Toggle Button -->
									<a href="#" class="dropdown-toggle" data-toggle="dropdown">
										<!-- The user image in the navbar-->
										<img src="../../style/dist/img/user2-160x160.jpg" class="user-image" alt="User Image">
										<!-- hidden-xs hides the username on small devices so only the image appears. -->
										<span class="hidden-xs">Alexander Pierce</span>
									</a>
									<ul class="dropdown-menu">
										<!-- The user image in the menu -->
										<li class="user-header">
											<img src="../../style/dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">

											<p>
												胖成球 - 信息安全
												<small>学号：1611522</small>
											</p>
										</li>
										<!-- Menu Body -->

										<!-- Menu Footer-->
										<li class="user-footer">
											<div class="pull-left">
												<a href="studentinfo.html?id={{studentId}}" class="btn btn-default btn-flat">Profile</a>
											</div>
											<div class="pull-right">
												<a href="#" class="btn btn-default btn-flat">Sign out</a>
											</div>
										</li>
									</ul>
								</li>

							</ul>
						</div>
					</nav>
				</header>
				<!-- Left side column. contains the logo and sidebar -->
				<aside class="main-sidebar " style="position: fixed ">

					<!-- sidebar: style can be found in sidebar.less -->
					<section class="sidebar">

						<!-- Sidebar user panel (optional) -->
						<div class="user-panel" style="height: 65px;">
							<div class="pull-left image">
								<img src="../../style/dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">
							</div>
							<div class="pull-left info">
								<p>Alexander Pierce</p>
								<!-- Status -->
								<a href="#"><i class="fa fa-circle text-success"></i> Online</a>
							</div>
						</div>

						<!-- search form (Optional) -->
						<!--<form action="#" method="get" class="sidebar-form">
        <div class="input-group">
          <input type="text" name="q" class="form-control" placeholder="Search...">
          <span class="input-group-btn">
              <button type="submit" name="search" id="search-btn" class="btn btn-flat"><i class="fa fa-search"></i>
              </button>
            </span>
        </div>
      </form>-->
						<!-- /.search form -->

						<!-- Sidebar Menu -->
						<ul class="sidebar-menu" data-widget="tree">
							<li class="header">EAMIS_HELPER</li>
							<!-- Optionally you can add icons to the links -->
							<li >
								<a href="#"><i class="fa fa-user"></i> <span>用户首页</span></a>
							</li>
							<li class="active">
								<a href="courseList.html?id={{studentId}}"><i class="fa fa-book"></i> <span>查看所有课程</span></a>
							</li>
							<li>
								<a href="course-attended.html?id={{studentId}}"><i class="fa fa-bookmark"></i> <span>查看已修课程</span></a>
							</li>
							<li>
								<a href="select_course.html?id={{studentId}}"><i class="fa fa-heart"></i> <span>推荐课程页面</span></a>
							</li>
							<li>
								<a href="studentinfo.html?id={{studentId}}"><i class="fa fa-edit"></i> <span>个人信息</span></a>
							</li>
							<!--<li class="treeview">
          <a href="#"><i class="fa fa-link"></i> <span>Multilevel</span>
            <span class="pull-right-container">
                <i class="fa fa-angle-left pull-right"></i>
              </span>
          </a>
          <ul class="treeview-menu">
            <li><a href="#">Link in level 2</a></li>
            <li><a href="#">Link in level 2</a></li>
          </ul>
        </li>-->
						</ul>
						<!-- /.sidebar-menu -->
					</section>
					<!-- /.sidebar -->
				</aside>

				<!-- Content Wrapper. Contains page content -->
	<!-- Content Wrapper. Contains page content -->
	<div class="content-wrapper">
		<!-- Content Header (Page header) -->
		<section class="content-header">
			<h1>
				老师详情
			</h1>
			<ol class="breadcrumb">
				<li>
					<a href="#"><i class="fa fa-home"></i>用户首页</a>
				</li>
				<li>
					<a href="#">查看所有课程</a>
				</li>
				<li class="active">老师详情</li>
			</ol>
		</section>

		<!-- Main content -->
		<section class="content">

			<div class="row">
				<div class="col-md-3">

					<!-- Profile Image -->
					<div class="box box-primary">
						<div class="box-body box-profile">
							<img class="profile-user-img img-responsive img-circle" src="../../style/dist/img/user4-128x128.jpg" alt="User profile picture">

							<h3 class="profile-username text-center" >{{ teacher.teacherName }}</h3>

							<p class="text-muted text-center"></p>

							<!-- /.box-body -->
						</div>
						
					</div>
						<!-- /.box -->

						<!-- About Me Box -->
						<div class="box box-primary">
							<div class="box-header with-border">
								<h3 class="box-title">基本信息</h3>
							</div>
							<!-- /.box-header -->
							<div class="box-body">
								<strong><i class="fa fa-fw fa-user"></i> 基本信息</strong>
								<p class="text-muted">
									<b>性别：</b> <p v-if=" teacher.gender == 1" > 男 </p>
								<p v-else > 女 </p> <br>
								<b>联系电话 </b> {{ teacher.telPhone }}<br>
								<b>E-mail </b> {{ teacher.email }}
								</p>
								<hr>
								<strong><i class="fa fa-book margin-r-5"></i> 学院</strong>

								<p class="text-muted">
									南开大学{{ college.collegeName }}
								</p>

								<hr>

								<strong><i class="fa fa-map-marker margin-r-5"></i> 办公地点</strong>

								<p class="text-muted">{{ teacher.officeAddress }}</p>

								<hr>

								<strong><i class="fa fa-pencil margin-r-5"></i> 标签</strong>

								<p v-for="(tag,index) in tags" >

									<span v-if="index%5 == 0"><span class="label label-danger">{{ tag.tagName }}</span></span>
									<span v-if="index%5 == 1"><span class="label label-success">{{ tag.tagName }}</span></span>
									<span v-if="index%5 == 2"><span class="label label-info">{{ tag.tagName }}</span></span>
									<span v-if="index%5 == 3"><span class="label label-warning">{{ tag.tagName }}</span></span>
									<span v-if="index%5 == 4"><span class="label label-primary">{{ tag.tagName }}</span></span>
								</p>

								<hr>
							</div>
							<!-- /.box-body -->
						</div>
						<!-- /.box -->
					
				</div>
				<!-- /.col -->

				<div class="col-md-9">
					<div class="nav-tabs-custom">
						<ul class="nav nav-tabs">
							<li class="active">
								<a href="#bigdata" data-toggle="tab">授课信息</a>
							</li>
							<li>
								<a href="#activity" data-toggle="tab">评论区</a>
							</li>

							<li>
								<a href="#settings" data-toggle="tab">大数据</a>
							</li>
						</ul>
						<div class="tab-content">
							<div class="active tab-pane" id="bigdata">
								<div class="post" style="height:400px;">
									<div id="main" style="width: 500px;height:244px;"></div>

								</div>

								<!--表格-->
								<div class="post clearfix" style="height: 400px;">
									<div class="col-xs-12 table-responsive">
										<table class="table table-striped">
											<thead>
											<tr>
												<th>编号</th>
												<th>课程名</th>
												<th>课程编号</th>
												<th>学分</th>
												<th>课程类型</th>
											</tr>
											</thead>
											<tbody>
											<tr v-for="(course,index) in courses" >
												<td>{{ index+1 }}</td>
												<td>{{ course.courseName }}</td>
												<td>{{ course.courseCode }}</td>
												<td>{{ course.credit }}</td>
												<td>{{ course.level }}类课</td>
											</tr>
											</tbody>
										</table>

										<!--</div>-->
										<!-- this row will not appear when printing -->
										<div class="row no-print">
											<div class="col-xs-12">
												<a href="invoice-print.html?id={{teacherId}}" target="_blank" class="btn btn-default"><i class="fa fa-print"></i> Print</a>
												<!--<button type="button" class="btn btn-primary pull-right" style="margin-right: 5px;">-->
													<!--<i class="fa fa-download"></i> Generate PDF
												</button>-->

											</div>
										</div>
									</div>
								</div>
							</div>

							<!-- /.tab-pane -->
							<div class=" tab-pane" id="activity">
								<!-- CommentInfo -->
								<div class="post" v-for="comment in comments" >
									<div class="user-block">
										<img class="img-circle img-bordered-sm" src="../../style/dist/img/user1-128x128.jpg" alt="user image">
										<span class="username">
                          <a href="#">{{ comment.nickName }}</a>
                          <a href="#" class="pull-right btn-box-tool"><i class="fa fa-times"></i></a>
                        </span>
										<span class="description">Shared publicly - {{ comment.commentTime }}</span>
									</div>
									<!-- /.user-block -->
									<p>
										{{ comment.commentContent }}
									</p>
									<ul class="list-inline">
										<!--<li><a href="#" class="link-black text-sm"><i class="fa fa-share margin-r-5"></i> Share</a></li>-->
										<li>
											<a href="#" class="link-black text-sm"><i class="fa fa-thumbs-o-up margin-r-5"></i> Like {{ comment.likeNumber }}</a>
										</li>
										<li class="pull-right">
											<a href="#" class="link-black text-sm"><i class="fa fa-comments-o margin-r-5"></i> Comments (5)
											</a>
										</li>
									</ul>

									<input class="form-control input-sm" type="text" placeholder="Type a comment">
								</div>
								<!-- /.CommentInfo -->
							</div>
							<!-- /.tab-pane -->
							<div class="tab-pane" id="settings" >
								<!-- Donut chart -->
								<div class="post clearfix" style="height: 800px;">
									<div class="box box-primary" style="width: 800px;">
										<div class="box-header with-border">
											<i class="fa fa-bar-chart-o"></i>

											<h3 class="box-title">内容评分</h3>

											<div class="box-tools pull-right">
												<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
												</button>
												<button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
											</div>
										</div>
										<div class="box-body">
											<div id="donut-chart" style="height: 300px;width:600px"></div>
										</div>
										<!-- /.box-body-->

										<div class="col-md-6">
											<!-- LINE CHART -->
											<div class="box box-info">
												<div class="box-header with-border">
													<h3 class="box-title">历年平均得分图</h3>

													<div class="box-tools pull-right">
														<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
														</button>
														<button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
													</div>
												</div>
												<div class="box-body chart-responsive">
													<div class="chart" id="line-chart" style="height: 300px;width: 300px;"></div>
												</div>
												<!-- /.box-body -->
											</div>
											<!-- /.box -->
										</div>
										<div class="col-md-6">
											<!-- BAR CHART -->
											<div class="box box-success">
												<div class="box-header with-border">
													<h3 class="box-title">去年得分分布图</h3>

													<div class="box-tools pull-right">
														<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
														</button>
														<button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
													</div>
												</div>
												<div class="box-body chart-responsive">
													<div class="chart" id="bar-chart" style="height: 300px;width: 300px;"></div>
												</div>
												<!-- /.box-body -->
											</div>
											<!-- /.box -->

										</div>
										<!-- /.box -->
									</div>
									<!-- /.tab-pane -->
								</div>
							</div>
							<!-- /.tab-content -->
						</div>
						<!-- /.nav-tabs-custom -->
					</div>
					<!-- /.col -->
				</div>
				<!-- /.row -->
			</div>
		</section>
		<!-- /.content -->
	</div>
	<!-- /.content-wrapper -->
	<footer class="main-footer">
		<div class="pull-right hidden-xs">
			<b>Version</b> 2.4.0
		</div>
		<strong>Copyright &copy; 2018 EAMIS-HELPER</a>.</strong> All rights reserved.
	</footer>


	<!-- Add the sidebar's background. This div must be placed
immediately after the control sidebar -->
	<div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->

<!-- jQuery 3 -->
<script src="../../style/bower_components/jquery/dist/jquery.min.js"></script>
<!-- Bootstrap 3.3.7 -->
<script src="../../style/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- FastClick -->
<script src="../../style/bower_components/fastclick/lib/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="../../style/dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../../style/dist/js/demo.js"></script>
<!-- FLOT CHARTS -->
<script src="../../style/bower_components/Flot/jquery.flot.js"></script>
<!-- FLOT RESIZE PLUGIN - allows the chart to redraw when the window is resized -->
<script src="../../style/bower_components/Flot/jquery.flot.resize.js"></script>
<!-- FLOT PIE PLUGIN - also used to draw donut charts -->
<script src="../../style/bower_components/Flot/jquery.flot.pie.js"></script>
<!-- FLOT CATEGORIES PLUGIN - Used to draw bar charts -->
<script src="../../style/bower_components/Flot/jquery.flot.categories.js"></script>
<!-- Morris.js charts -->
<script src="../../style/bower_components/raphael/raphael.min.js"></script>
<script src="../../style/bower_components/morris.js/morris.min.js"></script>
<!-- Page script -->


<!-- import Vue before Element -->

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
  var keywords='';
  var donutData='';
  var lineDate='';
  var barDate='';
  var teacherId='';
  var teacherInfo = new Vue({
    el:'#teacherInfo',
    data:{
        Login:{
		},
      teacherIdStr:'',
      teacher:'',
      college:'',
      courses:'',
      comments:'',
      tags:''
    },
    methods:{
        GetLogin(){
            $.ajax({
                url: 'http://localhost:8080/getsession',
                type: 'GET',
                data: {},
                dataType: 'json',
                success(json) {
                    if (json.success) {
                    } else {
                        alert(json.data);
                        location.href = "../login.html";
                    }
                },
                error: function (XMLHttpRequest) {
                    alert("输出错误信息" + XMLHttpRequest.responseText);
                }
            });
		},
      GetQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
        var r = window.location.search.substr(1).match(reg); //获取url中"?"符后的字符串并正则匹配
        var context = "";
        if (r != null)
          context = r[2];
        reg = null;
        r = null;
        return context == null || context == "" || context == "undefined" ? "" : context;
      },
      getPar(){
        teacherId = this.GetQueryString('id');
        },
      getTeacherInfo(){
        var _self = this;
        $.ajax({
          url:'http://localhost:8080/ClassRecommend/teacherInfo',
          type:'GET',
          data:{
            teacherIdStr:teacherId
          },
          dataType:'json',
          success:function (res) {
            if (res.success) {
              _self.teacher=res.data.teacher;
              _self.college = res.data.college;
              _self.courses = res.data.courses;
              _self.comments = res.data.comments;
              _self.tags = res.data.tags;
              keywords = res.data.keywords;
              donutData =res.data.tagsPercent;
              lineDate = res.data.preExamScore;
              barDate = res.data.preContentScore;



              var chart = echarts.init(document.getElementById('main'));
              var data = [];
              for(var name in keywords) {
                data.push({
                  name: name,
                  value: Math.sqrt(keywords[name])
                })
              }
              var maskImage = new Image();

              var option = {
                series: [{
                  type: 'wordCloud',
                  sizeRange: [10, 100],
                  rotationRange: [-90, 90],
                  rotationStep: 45,
                  gridSize: 2,
                  shape: 'pentagon',
                  maskImage: maskImage,
                  drawOutOfBound: false,
                  textStyle: {
                    normal: {
                      color: function() {
                        return 'rgb(' + [
                          Math.round(Math.random() * 160),
                          Math.round(Math.random() * 160),
                          Math.round(Math.random() * 160)
                        ].join(',') + ')';
                      }
                    },
                    emphasis: {
                      color: 'red'
                    }
                  },
                  data: data.sort(function(a, b) {
                    return b.value - a.value;
                  })
                }]
              };

              maskImage.onload = function() {
                option.series[0].maskImage
                chart.setOption(option);
              }

              maskImage.src = '../../style/newstyle/images/wordcloud.png';

              window.onresize = function() {
                chart.resize();
              }

              $(function() {
                /*
                 * DONUT CHART
                 * -----------
                 */
                $.plot('#donut-chart', donutData, {
                  series: {
                    pie: {
                      show: true,
                      radius: 1,
                      innerRadius: 0.5,
                      label: {
                        show: true,
                        radius: 2 / 3,
                        formatter: labelFormatter,
                        threshold: 0.1
                      }

                    }
                  },
                  legend: {
                    show: false
                  }
                })
                /*
                 * END DONUT CHART
                 */

              })



              // LINE CHART
              var line = new Morris.Line({
                element: 'line-chart',
                resize: true,
                data: lineDate,
                xkey: 'y',
                ykeys: ['item1'],
                labels: ['Item 1'],
                lineColors: ['#3c8dbc'],
                hideHover: 'auto'
              });

              //BAR CHART
              var bar = new Morris.Bar({
                element: 'bar-chart',
                resize: true,
                data: barDate,
                barColors: ['#00a65a'],
                xkey: 'y',
                ykeys: ['a'],
                labels: ['AverageScore'],
                hideHover: 'auto'
              });
              /*
               * Custom Label formatter
               * ----------------------
               */
              function labelFormatter(label, series) {
                return '<div style="font-size:13px; text-align:center; padding:2px; color: #fff; font-weight: 600;">' +
                  label +
                  '<br>' +
                  Math.round(series.percent) + '%</div>'
              }
            }
          }
        })
      }
    },
    mounted(){
        this.GetLogin();
      this.getPar();
      this.getTeacherInfo();
    }
  })

</script>
</body>

</html>