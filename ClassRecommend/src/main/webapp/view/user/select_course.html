<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>AdminLTE 2 | Blank Page</title>
	<!-- Tell the browser to be responsive to screen width -->
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
	<!-- Bootstrap 3.3.7 -->
	<link rel="stylesheet" href="../../style/bower_components/bootstrap/dist/css/bootstrap.min.css">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="../../style/bower_components/font-awesome/css/font-awesome.min.css">
	<!-- Ionicons -->
	<link rel="stylesheet" href="../../style/bower_components/Ionicons/css/ionicons.min.css">
	<!-- Theme style -->
	<link rel="stylesheet" href="../../style/dist/css/AdminLTE.min.css">
	<!-- AdminLTE Skins. Choose a skin from the css/skins
   folder instead of downloading all of them to reduce the load. -->
	<link rel="stylesheet" href="../../style/dist/css/skins/_all-skins.min.css">

	<link rel="stylesheet" href="../../style/newstyle/css/star.css">
	<link rel="stylesheet" type="text/css" href="../../style/newstyle/css/calendar.css"/>
	<link rel="stylesheet" href="../../style/newstyle/css/inputSpinner.css">
	<link rel="stylesheet" type="text/css" href="../../style/newstyle/css/coursedetails_new.css"/>

	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

	<!-- Google Font -->
	<link rel="stylesheet"
		  href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">

	<!--<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css'>-->
	<link rel='stylesheet' href='https://fonts.googleapis.com/icon?family=Material+Icons'>


</head>

<body class="hold-transition skin-blue-light sidebar-mini fixed">
<!-- Site wrapper -->
<div class="wrapper" id="courseInfo">

	<header class="main-header" id="headerStudentInfo" >

		<!-- Logo -->
		<a href="#" class="logo navbar-fixed-top">
			<!-- mini logo for sidebar mini 50x50 pixels -->
			<span class="logo-mini"><b>E</b>-h</span>
			<!-- logo for regular state and mobile devices -->
			<span class="logo-lg"><b>EAMIS-</b>Helper</span>
		</a>

		<!-- Header Navbar -->
		<nav class="navbar navbar-fixed-top" role="navigation">
			<!-- Sidebar toggle button-->
			<a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
				<span class="sr-only">Toggle navigation</span>
			</a>
			<!-- Navbar Right Menu -->
			<div class="navbar-custom-menu">
				<ul class="nav navbar-nav">

					<!-- Notifications Menu -->

					<!-- Tasks Menu -->
					<li class="dropdown tasks-menu">
						<!-- Menu Toggle Button -->
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">
							<i class="fa fa-flag-o"></i>
							<span class="label label-danger" id="pagesNotCommentCourses">{{ sub }}</span>
						</a>
						<ul class="dropdown-menu">
							<li class="header" id="pagesAlert">有{{ sub }}门课未评价</li>
							<li>
								<!-- Inner menu: contains the tasks -->
								<ul class="menu">
									<li>
										<!-- Task item -->
										<a :href="'http://localhost:8080/view/user/course-attended.html?id='+studentIdStr">
											<!-- Task title and progress text -->
											<h3>
												已评课数
												<small class="pull-right" id="pagesCourses" >{{ studentPageInfo.commentNumber }}/{{ studentPageInfo.selectNumber }}</small>
											</h3>
											<!-- The progress bar -->
											<div class="progress xs">
												<!-- Change the css width attribute to simulate progress -->
												<div class="progress-bar progress-bar-aqua" style="width: 20%" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">
													<!--<span class="sr-only">20% Complete</span>-->
												</div>
											</div>
										</a>
									</li>
									<!-- end task item -->
								</ul>
							</li>
							<li class="footer">
								<a :href="'http://localhost:8080/view/user/classdetail-uploads.html?id='+studentIdStr">进入评课</a>
							</li>
						</ul>
					</li>
					<!-- User Account Menu -->
					<li class="dropdown user user-menu">
						<!-- Menu Toggle Button -->
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">
							<!-- The user image in the navbar-->
							<img :src="studentPageInfo.portrait" class="user-image" alt="User Image">
							<!-- hidden-xs hides the username on small devices so only the image appears. -->
							<span class="hidden-xs" id="pagesStudentName">{{ studentPageInfo.nickName }}</span>
						</a>
						<ul class="dropdown-menu">
							<!-- The user image in the menu -->
							<li class="user-header">
								<img :src="studentPageInfo.portrait" class="img-circle" alt="User Image">

								<p id="pagesStudentMajor">
									{{ studentPageInfo.nickName }} - {{ studentPageInfo.major }}
									<small id="pagesStudentNumber">学号：{{ studentPageInfo.studentNumber }}</small>
								</p>
							</li>
							<!-- Menu Body -->

							<!-- Menu Footer-->
							<li class="user-footer">
								<div class="pull-left">
									<a :href="'studentinfo_new.html?id='+studentIdStr" class="btn btn-default btn-flat">Profile</a>
								</div>
								<div class="pull-right">
									<a v-on:click="out()" class="btn btn-default btn-flat">Sign out</a>
								</div>
							</li>
						</ul>
					</li>

				</ul>
			</div>
		</nav>
	</header>

	<!-- Left side column. contains the logo and sidebar -->
	<aside class="main-sidebar " style="position: fixed " id="asideStudentInfo">

		<!-- sidebar: style can be found in sidebar.less -->
		<section class="sidebar">

			<!-- Sidebar user panel (optional) -->
			<div class="user-panel" style="height: 65px;">
				<div class="pull-left image">
					<img :src="studentPageInfo.portrait" class="img-circle" alt="User Image">
				</div>
				<div class="pull-left info">
					<p>{{ studentPageInfo.nickName }}</p>

					<!-- Status -->
					<a href="#"><i class="fa fa-circle text-success"></i> Online</a>
				</div>
			</div>

			<!-- search form (Optional) -->
			<!--<form action="#" method="get" class="sidebar-form">
<div class="input-group">
<input type="text" name="q" class="form-control" placeholder="Search...">
<span class="input-group-btn">
  <button type="submit" name="search" id="search-btn" class="btn btn-flat"><i class="fa fa-search"></i>
  </button>
</span>
</div>
</form>-->
			<!-- /.search form -->

			<!-- Sidebar Menu -->
			<ul class="sidebar-menu" data-widget="tree">
				<li class="header">EAMIS_HELPER</li>
				<!-- Optionally you can add icons to the links -->
				<li >
					<a :href="'new_start.html?id='+studentIdStr"><i class="fa fa-user"></i> <span>用户首页</span></a>
				</li>
				<li >
					<a v-if="studentPageInfo.privilege == 0" :href="'http://localhost:8080/view/user/courseList.html?id='+studentIdStr"><i class="fa fa-book"></i> <span>查看所有课程</span></a>
					<a v-else :href="'../admin/course-administrator.html?id='+studentIdStr"><i class="fa fa-book"></i> <span>查看所有课程</span></a>
				</li>
				<li>
					<a :href="'course-attended.html?id='+studentIdStr"><i class="fa fa-bookmark"></i> <span>查看已修课程</span></a>
				</li>
				<li class="active">
					<a :href="'select_course.html?id='+studentIdStr"><i class="fa fa-edit"></i> <span>推荐课程</span></a>
				</li>
				<li v-if="studentPageInfo.privilege == 1">
					<a :href="'../admin/manageStudent.html?id='+studentIdStr"><i class="fa fa-heart"></i> <span>查看所有用户信息</span></a>
				</li>
				<li>
					<a :href="'studentinfo_new.html?id='+studentIdStr"><i class="fa fa-edit"></i> <span>个人信息</span></a>
				</li>
				<!--<li class="treeview">
<a href="#"><i class="fa fa-link"></i> <span>Multilevel</span>
<span class="pull-right-container">
    <i class="fa fa-angle-left pull-right"></i>
  </span>
</a>
<ul class="treeview-menu">
<li><a href="#">Link in level 2</a></li>
<li><a href="#">Link in level 2</a></li>
</ul>
</li>-->
			</ul>

		</section>
		<!-- /.sidebar -->
	</aside>

	<!-- =============================================== -->

	<!-- Content Wrapper. Contains page content -->
	<div class="content-wrapper">
		<!-- Content Header (Page header) -->
		<section class="content-header">
			<h1>
				自定义课程推荐
				<small>CHOOSE BY URSELF</small>
			</h1>
			<ol class="breadcrumb">
				<li>
					<a href="#"><i class="fa fa-home"></i> 用户首页</a>
				</li>

				<li class="active">自定义课程推荐</li>
			</ol>
		</section>
		<!-- Main content -->
		<section class="content" style="height: 900px;">

			<div style="width: 25%;display: inline-block">
				<!-- Default box -->
				<div class="box" style="display: inline-block;">
					<div class="box-header with-border">
						<h3 class="box-title">个人信息</h3>

						<div class="box-tools pull-right">
							<button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip"
									title="Collapse">
								<i class="fa fa-minus"></i></button>
							<button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip"
									title="Remove">
								<i class="fa fa-times"></i></button>
						</div>
					</div>
					<div class="box-body" id="studentBasicInfo">
						<div>
							<strong>姓名</strong>： {{ student.student.studentName }} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							<strong>年级</strong>： {{ student.grade }} 级
						</div>
						<br/>
						<strong style="">学号</strong>：{{ student.student.studentNumber }}
						<br/>
						<br/>
						<strong>专业</strong>： {{ student.major }} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
						<strong>学院</strong>: {{ student.college }}
					</div>
					<!-- /.box-body -->
					<div class="box-footer">
						MADE BY NKU_RECOMMENDER
					</div>
					<!-- /.box-footer-->
					<!-- /.box -->
				</div>
				<!---->

				<div class="box" style="display: inline-block;">
					<div class="box-header with-border">
						<h3 class="box-title">自定义添加</h3>
						<div class="box-tools pull-right">
							<button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip"
									title="Collapse">
								<i class="fa fa-minus"></i></button>
							<button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip"
									title="Remove">
								<i class="fa fa-times"></i></button>
						</div>
					</div>
					<div class="box-body">

						<form action="#" method="post" id="searchCourse">
							请输入课程编号或名称：
							<div class="input-group input-group" style="margin-top: 20px;">
								<input type="text" class="form-control" name="courseKeyword">
								<span class="input-group-btn">
                                    <button type="submit" class="btn btn-info btn-flat">Go!</button>
                                </span>
							</div>
						</form>

					</div>
					<div class="search-results" id="searchCourseResult">

					</div>
					<!--</div>-->
					<!--</div>-->
				</div>
				<!-- /.box-body -->
				<div class="box-footer">
					MADE BY NKU_RECOMMENDER
				</div>
				<!-- /.box-footer-->
				<!-- /.box -->
			</div>
m


			<div class="box" style="width: 72%; float: right;display: inline-block;">
				<div class="box-header with-border">
					<h3 class="box-title">个性化定制</h3>

					<div class="box-tools pull-right">
						<button type="button" class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip"
								title="Collapse">
							<i class="fa fa-minus"></i></button>
						<button type="button" class="btn btn-box-tool" data-widget="remove" data-toggle="tooltip"
								title="Remove">
							<i class="fa fa-times"></i></button>
					</div>
				</div>
				<div class="box-body">
				<form id="selfSetting" action="#" method="post" >
					<div class="box-body" >
						<div style="display: inline-block;width: 15%;float: left;"><strong>修课要求：</strong></div>

						<div style="display: inline-block;width: 30%;float: left;">
							<div class="form-group">
								<div class="checkbox"><label><input type="checkbox" id="coursePreferD"
																	onclick="selectCoursePreferD(this)">
									<strong>D类课程偏好</strong></label>
									<div class="form-group">
										<div class="checkbox"><label><input type="checkbox" name="courseD" id="selectMoreD"
																			onclick="preferRequestD(this)">多选D类课</label>
										</div>

										<div class="checkbox"><label><input type="checkbox" id="selectNumberD" name="courseD"
																			onclick="preferRequestD(this)">选D类课数量
											<input type="number" id="numberD" disabled="disabled" max="10" style="width: 20% ;height: 70%" ></label>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div style="display: inline-block;width: 30%;float: left;">
							<div class="form-group">
								<div class="checkbox"><label><input type="checkbox" id="coursePreferE"
																	onclick="selectCoursePreferE(this)">
									<strong>E类课程偏好</strong></label>
									<div class="form-group">
										<div class="checkbox"><label><input type="checkbox" name="courseE" id="selectMoreE"
																			onclick="preferRequestE(this)">多选E类课</label>
										</div>

										<div class="checkbox"><label><input type="checkbox" name="courseE" id="selectNumberE"
																			onclick="preferRequestE(this)">选E类课数量
											<input type="number" id="numberE" disabled="disabled" max="10" style="width: 20% ;height: 70%" >
										</label>

										</div>
									</div>
								</div>
							</div>
						</div>

						<div style="display: inline-block; width: 10%;">
							<div class="checkbox"><label>
								<strong></strong></label>
								<div class="form-group">
									<div class="checkbox"><label></label></div>

									<div class="checkbox"><label></label></div>
								</div>
							</div>
						</div>

						<hr style="height:1px;border:none;border-top:1px dashed #0066CC;"/>

						<!---->

						<div style="display: inline-block;width: 15%;float: left;"><strong>学分要求：</strong></div>

						<div style="display: inline-block;width:85%;float: left;">
							<div class="form-group">
								<div class="checkbox"><label><input type="checkbox" id="selectCourseType"
																	onclick="selectCourseType(this)"> <strong>课程类型:</strong></label>
									<div class="form-group">
										<div class="checkbox-inline"><label><input type="checkbox" name="selectOne" id="allCourse"
																				   onclick="scoreRequest(this)">全部课程（出国党推荐）</label>
										</div>
										<div class="checkbox-inline"><label><input type="checkbox" name="selectOne" id="courseABCD"
																				   onclick="scoreRequest(this)">ABCD类课（保研推荐）</label>
										</div>
									</div>
								</div>
								<!--</div>-->
								<div style="display: inline-block; ">
									<div class="checkbox"><label><input type="checkbox" id="preScoreRequest"
																		onclick="requestScore(this)">
										<strong>分数要求：</strong></label>
										<label>课程历史平均分 >= <input style="width: 20%" type="text" id="preScore" disabled="disabled"
																 onclick="requestScoreValue(this)"></label>
									</div>
								</div>
							</div>
						</div>
						<br/>


						<!--<div>-->


						<div style="display: block;width: 100%;float: left;">
							<hr style="height:1px;border:none;border-top:1px dashed #0066CC;"/>
						</div>


						<div style="display: inline-block;width: 30%;float: left;"><strong>内容要求（多选）：</strong></div>

						<!--</div>-->


						<div style="display: inline-block;width: 80%; margin-left:10%">

							<div class="form-group">
								<label class="col-sm-2 control-label">手下留情</label>


								<div class='rating-stars' id="bearScore" >
									<ul  class="stars">

										<li class='star' title='Poor'data-value="1">
											<i class='fa fa-star fa-fw'></i>
										</li>
										<li class='star' title='Fair' data-value="2" >
											<i class='fa fa-star fa-fw'></i>
										</li>
										<li class='star' title='Good' data-value="3" >
											<i class='fa fa-star fa-fw'></i>
										</li>
										<li class='star' title='Excellent' data-value="4" >
											<i class='fa fa-star fa-fw'></i>
										</li>
										<li class='star' title='WOW!!!' data-value="5">
											<i class='fa fa-star fa-fw'></i>
										</li>

									</ul>
								</div>
							</div>

							<div class="form-group">
								<label class="col-sm-2 control-label">课堂有趣</label>

								<div class='rating-stars' id="interestingScore">
									<ul id="stars2" class="stars">

										<li class='star' title='Poor' data-value="1">
											<i class='fa fa-star fa-fw'></i>
										</li>
										<li class='star' title='Fair' data-value="2">
											<i class='fa fa-star fa-fw'></i>
										</li>
										<li class='star' title='Good' data-value="3">
											<i class='fa fa-star fa-fw'></i>
										</li>
										<li class='star' title='Excellent'data-value="4">
											<i class='fa fa-star fa-fw'></i>
										</li>
										<li class='star' title='WOW!!!' data-value="5">
											<i class='fa fa-star fa-fw'></i>
										</li>

									</ul>
								</div>
							</div>

							<div class="form-group">
								<label class="col-sm-2 control-label">划水程度</label>

								<div class='rating-stars' id="easyScore">
									<ul id="stars3" class="stars">

										<li class='star' title='Poor'data-value="1">
											<i class='fa fa-star fa-fw'></i>
										</li>
										<li class='star' title='Fair' data-value="2">
											<i class='fa fa-star fa-fw'></i>
										</li>
										<li class='star' title='Good'data-value="3">
											<i class='fa fa-star fa-fw'></i>
										</li>
										<li class='star' title='Excellent'data-value="4">
											<i class='fa fa-star fa-fw'></i>
										</li>
										<li class='star' title='WOW!!!'data-value="5">
											<i class='fa fa-star fa-fw'></i>
										</li>

									</ul>
								</div>
							</div>

							<div class="form-group">
								<label class="col-sm-2 control-label">干货满满</label>

								<div class='rating-stars ' id="knowledgeScore">
									<ul id="stars4" class="stars">

										<li class='star' title='Poor'data-value="1" >
											<i class='fa fa-star fa-fw'></i>
										</li>
										<li class='star' title='Fair' data-value="2">
											<i class='fa fa-star fa-fw'></i>
										</li>
										<li class='star' title='Good'data-value="3" >
											<i class='fa fa-star fa-fw'></i>
										</li>
										<li class='star' title='Excellent'data-value="4" >
											<i class='fa fa-star fa-fw'></i>
										</li>
										<li class='star' title='WOW!!!'data-value="5" >
											<i class='fa fa-star fa-fw'></i>
										</li>

									</ul>

								</div>
							</div>

							<!--</form>-->
						</div>

						<div style="display: block;width: 100%;float: left;">
							<hr style="height:1px;border:none;border-top:1px dashed #0066CC;"/>
							<strong>已添加的必选课程：</strong>
							<br/><br/>
							<div id="alreadySelectCourse">

							</div>
							<div style="float:right">
								<div style="margin-right:20px;margin-bottom: 5%; margin-top: 5%;">
									<td>
										<button type="submit" class="btn btn-block btn-primary btn-lg"
												style="width: 150px; ">submit
										</button>
									</td>
								</div>
							</div>
						</div>
                         <div style="height:200px;"></div>
						<!-- /.box-body -->

						<div class="box-footer">
							made by NKU_RECOMMENDER
						</div>
						<!-- /.box-footer-->
					</div>
					<!-- /.box -->
				</form>
				<!-- /.content -->
				</div>
			</div>

		</section>

	</div>
	</div>

	<footer class="main-footer">
		<strong>Copyright &copy; 2018 EAMIS-Helper.</strong> All rights
		reserved.
	</footer>


</div>


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<!-- ./wrapper -->

<!-- jQuery 3 -->
<script src="../../style/bower_components/jquery/dist/jquery.min.js"></script>
<!-- Bootstrap 3.3.7 -->
<script src="../../style/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- SlimScroll -->
<script src="../../style/bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script>
<!-- FastClick -->
<script src="../../style/bower_components/fastclick/lib/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="../../style/dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../../style/dist/js/demo.js"></script>
<script src="../../style/newstyle/js/star.js"></script>
<script src="../../style/newstyle/js/inputSpinner.js"></script>

<script>
    $(document).ready(function () {
        $('.sidebar-menu').tree()
    })
</script>
</body>
<script>

	var studentIdStr='';

	var headerStudentInfo = new Vue({
		el:'#headerStudentInfo',
		data:{
		    studentPageInfo:{

			},
			sub:'',
			studentIdStr:'',
		},
		methods:{
            GetQueryString(name) {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
                var r = window.location.search.substr(1).match(reg); //获取url中"?"符后的字符串并正则匹配
                var context = "";
                if (r != null)
                    context = r[2];
                reg = null;
                r = null;
                return context == null || context == "" || context == "undefined" ? "" : context;
            },
            getPar() {
                studentIdStr = this.GetQueryString('id');
            },
		    getPageStudentInfo(){
		        $.ajax({
                    url:'http://localhost:8080/studentPagesInfo',
					data:{
                        studentIdStr:studentIdStr,
					},
					type:'GET',
					dataType:'json',
					success:function (res) {
                        headerStudentInfo.studentPageInfo = res.data.student;
                        headerStudentInfo.sub = res.data.student.selectNumber - res.data.student.commentNumber;
                        headerStudentInfo.studentIdStr = studentIdStr;
                    }
				})

			},
            out(){
                $.ajax({
                    url:'http://localhost:8080/out',
                    data:{},
                    type:'GET',
                    dataType:'json',
                    success(res){
                        alert(res.data);
                        location.href = "../login.html";
                    }
                })
            }
            ,
		},
		mounted(){
		    this.getPar();
		    this.getPageStudentInfo();
		}
	})

	var asideStudentInfo = new Vue({
		el:'#asideStudentInfo',
        data:{
            studentPageInfo:{

            },
            sub:'',
            studentIdStr:'',
        },
        methods:{
            getPageStudentInfo(){
                $.ajax({
                    url:'http://localhost:8080/studentPagesInfo',
                    data:{
                        studentIdStr:studentIdStr,
                    },
                    type:'GET',
                    dataType:'json',
                    success:function (res) {
                        asideStudentInfo.studentPageInfo = res.data.student;
                        asideStudentInfo.sub = res.data.student.selectNumber - res.data.student.commentNumber;
                        asideStudentInfo.studentIdStr = studentIdStr;
                    }
                })

            }
        },
        mounted(){
            this.getPageStudentInfo();
        }
	})

	var grade='';
	var college='';
	var major='';

    function scoreRequest(obj) {

        var checks = document.getElementsByName("selectOne");
        var choose = document.getElementById("selectCourseType");

        if (obj.checked && choose.checked) {
            for (var i = 0; i < checks.length; i++) {
                checks[i].checked = false;
            }
            obj.checked = true;
        } else {
            for (var i = 0; i < checks.length; i++) {
                checks[i].checked = false;
            }
        }
    }

    function selectCourseType(obj) {

        var checks = document.getElementsByName("selectOne");

        if (!obj.checked) {

            for (var i = 0; i < checks.length; i++) {
                checks[i].checked = false;
            }
        }
    }

    function selectCoursePreferD(obj) {

        var coursePrefer = document.getElementsByName("courseD");

        if (!obj.checked) {

            for (var i = 0; i < coursePrefer.length; i++) {
                coursePrefer[i].checked = false;
            }

            document.getElementById("numberD").setAttribute("disabled","disabled");
        }

    }

    function selectCoursePreferE(obj) {

        var coursePrefer = document.getElementsByName("courseE");

        if (!obj.checked) {

            for (var i = 0; i < coursePrefer.length; i++) {
                coursePrefer[i].checked = false;
            }

            document.getElementById("numberE").setAttribute("disabled","disabled");
        }

    }

    function preferRequestD(obj) {

        var checks = document.getElementsByName("courseD");
        var choose = document.getElementById("coursePreferD");

        if(obj.getAttribute("id") == "selectNumberD" && obj.checked && choose.checked){

            document.getElementById("numberD").removeAttribute("disabled");
        }else{
            document.getElementById("numberD").setAttribute("disabled","disabled");
        }

        if (obj.checked && choose.checked) {
            for (var i = 0; i < checks.length; i++) {
                checks[i].checked = false;
            }
            obj.checked = true;
        } else {
            for (var i = 0; i < checks.length; i++) {
                checks[i].checked = false;
            }
        }
    }

    function preferRequestE(obj) {
        var checks = document.getElementsByName("courseE");
        var choose = document.getElementById("coursePreferE");

        if(obj.getAttribute("id") == "selectNumberE" && obj.checked && choose.checked){

            document.getElementById("numberE").removeAttribute("disabled");
        }else{
            document.getElementById("numberE").setAttribute("disabled","disabled");
        }

        if (obj.checked && choose.checked) {
            for (var i = 0; i < checks.length; i++) {
                checks[i].checked = false;
            }
            obj.checked = true;
        } else {
            for (var i = 0; i < checks.length; i++) {
                checks[i].checked = false;
            }
        }
    }

    function requestScore(obj) {

        var preScore = document.getElementById("preScore");

        if (obj.checked) {

            preScore.removeAttribute("disabled");
        } else {
            preScore.setAttribute("value",'');
            preScore.setAttribute("disabled", "disabled");
        }

    }

    function requestScoreValue(obj) {

        var preScoreRequest = document.getElementById("preScoreRequest");

        if (!preScoreRequest.checked) {
            obj.setAttributes("disabled", "disabled");
        } else {
            obj.setAttributes("disabled", "able");
        }
    }


    var studentId;

    var studentBasicInfo = new Vue({

        el: '#studentBasicInfo',
        data: {
            student: {
                student:{
                    studentName:'',
					studentNumber:'',
				},
				college:'',
				major:'',
				grade:'',
			}
        },
        methods: {
            GetQueryString(name) {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
                var r = window.location.search.substr(1).match(reg); //获取url中"?"符后的字符串并正则匹配
                var context = "";
                if (r != null)
                    context = r[2];
                reg = null;
                r = null;
                return context == null || context == "" || context == "undefined" ? "" : context;
            },
            getPar() {
                studentId = this.GetQueryString('id');
            },
            getStudentBasicInfo() {
                $.ajax({
                        url: 'http://localhost:8080/studentBasicInfo',
                        type: 'GET',
                        data: {
                            studentIdStr: studentId
                        },
                        dataType: 'json',
                        success: function (res) {
                            if (res.success) {
                                studentBasicInfo.student = res.data.student;
                                grade = studentBasicInfo.student.grade;
                                college = studentBasicInfo.student.college;
                                major = studentBasicInfo.student.major;
                            }
                        }
                    }
                )
            },
        },
        mounted() {
            this.getPar();
            this.getStudentBasicInfo();
        }
    });

    $('#searchCourse').submit(function (e) {
        e.preventDefault();
        console.log($('#searchCourse').serialize().courseKeyword),
            $.ajax({
                url: 'http://localhost:8080/searchCourse',
                data: $('#searchCourse').serialize(),
                type: 'GET',
                beforeSend: function () {
                    $('#searchCourseResult').html('')
                },
                success: function (res) {
                    if (res.success) {

                        var indexSelect = new Array();


                        for (var course of res.data.courses) {

                            var selectId = "select" + course.id;
                            var removeId = "remove"+course.id;
                            indexSelect[course.id] = course.courseName;

                            var courseName = course.courseCode + " " + course.courseName;

                            $('#searchCourseResult').append(`<div class="search-result">
                            ${ courseName }
                            <i class='material-icons add-icon' id=` + selectId + ` value = `+ course.id + `>add</i>
                        </div>`);

                            var newSelectId = "#"+selectId;

                            $('#searchCourseResult').on("click", newSelectId, this , function (obj) {

                                var courseId = obj.valueOf().target.getAttribute("value")

                                var isSelect = document.getElementsByName("selectedCourses");

                                var i = 1;

                                for (var selectCourse of isSelect) {

                                    if (selectCourse.getAttribute("id") == "remove"+courseId) {
                                        i = 0;
                                    }
                                }

                                if (i) {

                                    $('#alreadySelectCourse').append(`<input type="button" name="selectedCourses" class='btn btn-info' id="remove` + courseId + `" value=`+ indexSelect[courseId] +` />`);

                                }

                            });

                            var newRemoveId = "#"+removeId;

                            $('#alreadySelectCourse').on("click", newRemoveId, this , function (obj) {

                                var remove = obj.valueOf().target.getAttribute("id")
                                document.getElementById(remove).remove();
                            })

                        }
                    }
                }
            })
    });

    var bearScore = 0;
    var interestingScore = 0;
    var easyScore = 0;
    var knowledgeScore = 0;

    $(document).ready(function () {
        /* 1. Visualizing things on Hover - See next part for action on click */
        $('.stars li').on('mouseover', function () {
            var onStar = parseInt($(this).data('value'), 10); // The star currently mouse on
            // Now highlight all the stars that's not after the current hovered star
            $(this).parent().children('li.star').each(function (e) {
                if (e < onStar) {
                    $(this).addClass('hover');
                }
                else {
                    $(this).removeClass('hover');
                }
            });

        }).on('mouseout', function () {
            $(this).parent().children('li.star').each(function (e) {
                $(this).removeClass('hover');
            });
        });


        /* 2. Action to perform on click */
        $('.stars li').on('click', function () {
            var onStar = parseInt($(this).data('value'), 10); // The star currently selected
            var stars = $(this).parent().children('li.star');

            for (i = 0; i < stars.length; i++) {
                $(stars[i]).removeClass('selected');
            }

            for (i = 0; i < onStar; i++) {
                $(stars[i]).addClass('selected');
            }

            var ratingValue = $(this).parent().children('.selected').last().data('value');
            console.log($(this).parent().children('.selected').last().data('value'));
            console.log($(this).parent().parent().attr("id"));
            if ($(this).parent().parent().attr("id") === "bearScore") {
                // 这里填写你要赋值的 Vue内data
                bearScore = ratingValue;
            }
            if ($(this).parent().parent().attr("id") === "interestingScore") {
                // classDetail.comment.score.interestingScore = ratingValue;
                interestingScore = ratingValue;
            }
            if ($(this).parent().parent().attr("id") === "easyScore") {
                // classDetail.comment.score.easyScore = ratingValue;
                easyScore = ratingValue
            }
            if ($(this).parent().parent().attr("id") === "knowledgeScore") {
                // classDetail.comment.score.knowledgeScore = ratingValue;
                knowledgeScore = ratingValue;
            }
            // console.log(classDetail.comment.score);
        });
    })

    // function bareScore(number) {
    //     document.getElementById("bareScore").setAttribute("value",number);
    // }
	//
    // function interScore(number) {
    //     document.getElementById("interestingScore").setAttribute("value",number);
    // }
	//
    // function easilyScore(number) {
    //     document.getElementById("easyScore").setAttribute("value",number);
    // }
	//
    // function knowScore(number) {
    //     document.getElementById("knowledgeScore").setAttribute("value",number);
    // }

    $("#selfSetting").submit(function (e) {
        var selectedCourses = new Array();
        var i = 0;
        for( var selected of document.getElementsByName("selectedCourses") ){

            selectedCourses[i] = selected.id.substring(6);
            i++;
		}

        e.preventDefault();
        $.ajax({
            url:'http://localhost:8080/rCourse',
            data:{
                preferD:document.getElementById("coursePreferD").valueOf().checked,
                preferE:document.getElementById("coursePreferE").valueOf().checked,
                selectMoreD:document.getElementById("selectMoreD").valueOf().checked,
                selectMoreE:document.getElementById("selectMoreE").valueOf().checked,
                selectNumberD:document.getElementById("selectNumberD").valueOf().checked,
                selectNumberE:document.getElementById("selectNumberE").valueOf().checked,
                numberD:document.getElementById("numberD").valueOf().value,
                numberE:document.getElementById("numberE").valueOf().value,
                selectCourseType:document.getElementById("selectCourseType").valueOf().checked,
                allCourse:document.getElementById("allCourse").valueOf().checked,
                courseABCD:document.getElementById("courseABCD").valueOf().checked,
                preScoreRequest:document.getElementById("preScoreRequest").valueOf().checked,
                preScore:document.getElementById("preScore").valueOf().value,
                bearScore:bearScore,
                interestingScore:interestingScore,
                easyScore:easyScore,
                knowledgeScore:knowledgeScore,
                selectedCourses:selectedCourses,

				grade:grade,
				college:college,
				major:major

            },
            type:'POST',
            success:function (res) {
                if(res.success){
                    var target='http://localhost:8080/view/user/calendar.html?id='+studentIdStr;
                    window.location.href=target;
                }
                else{
                    alert(res.data)
				}
            }
        })
    })

    $(function (){
        function GetLogin(){
            $.ajax({
                url:'http://localhost:8080/getsession',
                type: 'Get',
                data : {},
                dataType:'json',
                success(json){
                    if(json.success){
                        this.Login=json.data;
                        alert(this.Login.nickName);
                    }else{
                        alert(json.data);
                        location.href="../login.html";
                    }
                },
                error: function (XMLHttpRequest){
                    alert(("输出错误信息")+XMLHttpRequest.responseText);
                }
            })
        }



    })



</script>
</html>